<UserControl x:Class="AirTicket.View.TicketSales"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:rule="clr-namespace:AirTicket.ValidRule"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:local="clr-namespace:AirTicket"
             mc:Ignorable="d"
             d:DesignHeight="800"
             d:DesignWidth="1000"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             TextElement.Foreground="{DynamicResource MaterialDesignBody}"
             TextElement.FontWeight="Regular"
             TextElement.FontSize="13"
             TextOptions.TextFormattingMode="Ideal"
             TextOptions.TextRenderingMode="Auto"
             Background="{DynamicResource MaterialDesignPaper}"
             FontFamily="{DynamicResource MaterialDesignFont}"
             DataContext="{StaticResource TicketSalesVM}">
    <Grid Background="{DynamicResource BackgroundColor}">
        <TabControl Background="{DynamicResource BackgroundColor}"
                    BorderThickness="0"
                    Name="tabTicketSale">
            <!--select flight-->
            <TabItem Header="Chọn chuyến bay"
                     Width="auto"
                     Height="50"
                     VerticalAlignment="Top"
                     Style="{StaticResource MaterialDesignNavigationRailTabItem}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseClick">
                        <i:InvokeCommandAction Command="{Binding ReturnCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="300"></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>

                    <!--info flight-->
                    <materialDesign:Card materialDesign:ShadowAssist.ShadowDepth="Depth1"
                                         materialDesign:ShadowAssist.ShadowEdges="None"
                                         Padding="10">
                        <StackPanel>
                            <TextBlock Text="TÌM KIẾM CHUYẾN BAY"
                                       Foreground="{DynamicResource TextNormalColor}"
                                       FontWeight="SemiBold"
                                       FontSize="15"
                                       Padding="10,5,0,5" />
                            <Separator Background="Silver" />
                            <ListBox Style="{StaticResource MaterialDesignFilterChipAccentOutlineListBox}"
                                     Padding="5"
                                     x:Name="listFlightName">
                                <ListBoxItem Content="Vietnam Airlines" />
                                <ListBoxItem IsSelected="True"
                                             Content="Vietjet Air" />
                                <ListBoxItem Content="Bamboo Airways" />
                                <ListBoxItem IsEnabled="true"
                                             Content="Vietravel airlines" />
                            </ListBox>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <StackPanel Width="auto">
                                    <StackPanel Orientation="Horizontal">
                                        <StackPanel>
                                            <TextBlock Margin="10,5,0,5"
                                                       Text="Điểm đi"
                                                       Foreground="{DynamicResource TextNormalColor}" />
                                            <ComboBox ItemsSource="{Binding AirportList}" SelectedValuePath="Value" DisplayMemberPath="Key"
                                                      materialDesign:HintAssist.Hint="Nhập thành phố / mã sân bay"
                                                      materialDesign:HintAssist.HintOpacity=".26"
                                                      IsEditable="False"
                                                      Margin="10,0,0,0"
                                                      HorizontalAlignment="Left"
                                                      Width="193">
                                            </ComboBox>
                                            <!--ItemsSource="{Binding ShortStringList}"-->
                                        </StackPanel>
                                        <StackPanel Margin="20,0,0,0">
                                            <TextBlock Margin="10,5,0,5"
                                                       Text="Điểm đến"
                                                       Foreground="{DynamicResource TextNormalColor}" />
                                            <ComboBox ItemsSource="{Binding AirportList}" SelectedValuePath="Value" DisplayMemberPath="Key"
                                                      materialDesign:HintAssist.Hint="Nhập thành phố / mã sân bay"
                                                      materialDesign:HintAssist.HintOpacity=".26"
                                                      IsEditable="False"
                                                      Margin="10,0,0,0"
                                                      HorizontalAlignment="Left"
                                                      Width="193">
 
                                            </ComboBox>
                                            <!--ItemsSource="{Binding ShortStringList}"-->
                                        </StackPanel>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <StackPanel>
                                            <TextBlock Margin="10,20,0,5"
                                                       Text="Ngày đi"
                                                       Foreground="{DynamicResource TextNormalColor}" />
                                            <DatePicker x:Name="DatePicker"
                                                        materialDesign:HintAssist.Hint="{Binding ValidatingDate, StringFormat='dd/MM/yyyy'}"
                                                        materialDesign:CalendarAssist.IsHeaderVisible="False"
                                                        Margin="10,0,0,0"
                                                        HorizontalAlignment="Left"
                                                        Width="193">
                                                <DatePicker.SelectedDate>
                                                    <Binding Path="ValidatingDate"
                                                             UpdateSourceTrigger="PropertyChanged">
                                                        <Binding.ValidationRules>
                                                            <rule:DateValidationRule ValidatesOnTargetUpdated="True" />
                                                        </Binding.ValidationRules>
                                                    </Binding>
                                                </DatePicker.SelectedDate>
                                            </DatePicker>
                                        </StackPanel>
                                        <StackPanel Margin="20,0,0,0">
                                            <TextBlock Margin="10,20,0,5"
                                                       Text="Hành khách"
                                                       Foreground="{DynamicResource TextNormalColor}" />
                                            <Grid>
                                                <TextBox Width="198"
                                                         IsEnabled="False"
                                                         Text="1"
                                                         Margin="10,0,0,0">
                                                </TextBox>
                                                <materialDesign:PackIcon HorizontalAlignment="Right"
                                                                         Kind="AccountGroup"
                                                                         VerticalAlignment="Center"
                                                                         Foreground="Gray" />
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Margin="100,20,100,0">
                                        <Button Command="{Binding SearchTicketCommand}"
                                                Style="{StaticResource MaterialDesignFlatLightBgButton}"
                                                ToolTip="Tìm kiếm chuyến bay"
                                                Content="Tìm kiếm" />
                                        <materialDesign:PackIcon Kind="Magnify"
                                                                 Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}"
                                                                 VerticalAlignment="Center"
                                                                 Width="50"
                                                                 Height="20" />
                                    </Grid>
                                </StackPanel>

                                <Grid Grid.Column="1">
                                    <ItemsControl ItemsSource="{Binding listPassengerVM}"
                                                  HorizontalAlignment="Left"
                                                  Margin="120,0,0,0">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <DockPanel Margin="0,0,0,15">
                                                    <StackPanel  Width="200"
                                                                 VerticalAlignment="Center">
                                                        <TextBlock Text="{Binding typePassenger}"
                                                                   Name="typePassenger" />
                                                        <TextBlock Text="{Binding regulationAge}"
                                                                   Margin="0,0,0,10"
                                                                   Foreground="{DynamicResource PrimaryHueLightBrush}" />
                                                    </StackPanel>
                                                    <Button   Style="{StaticResource MaterialDesignIconButton}"
                                                              Foreground="#6F8294"
                                                              ToolTip="Giảm hành khách"
                                                              IsEnabled="{Binding IsEnableReduce}">
                                                        <materialDesign:PackIcon Kind="MinusCircle" />
                                                        <i:Interaction.Triggers>
                                                            <i:EventTrigger EventName="Click">
                                                                <i:InvokeCommandAction Command="{Binding ReducePassengerCommand}" />
                                                            </i:EventTrigger>
                                                        </i:Interaction.Triggers>
                                                    </Button>
                                                    <TextBlock VerticalAlignment="Center"
                                                               TextAlignment="Center"
                                                               FontSize="20"
                                                               Width="40"
                                                               Text="{Binding NumberOfPassenger}" />
                                                    <Button Style="{StaticResource MaterialDesignIconButton}"
                                                            ToolTip="Thêm hành khách"
                                                            Foreground="#6F8294"
                                                            IsEnabled="{Binding IsEnableAdd}">
                                                        <materialDesign:PackIcon Kind="PlusCircle" />
                                                        <i:Interaction.Triggers>
                                                            <i:EventTrigger EventName="Click">
                                                                <i:InvokeCommandAction Command="{Binding AddPassengerCommand}" />
                                                            </i:EventTrigger>
                                                        </i:Interaction.Triggers>
                                                    </Button>
                                                </DockPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Grid>
                            </Grid>
                        </StackPanel>
                    </materialDesign:Card>

                    <!--list flight-->
                    <Grid Grid.Row="1"
                          Margin="30">
                        <materialDesign:Card materialDesign:ShadowAssist.ShadowDepth="Depth1"
                                             materialDesign:ShadowAssist.ShadowEdges="None">
                            <ListView ItemsSource="{Binding listFlightVM}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn DisplayMemberBinding="{Binding airline}"
                                                        Header="Hàng không" />
                                        <GridViewColumn DisplayMemberBinding="{Binding flight}"
                                                        Header="Chuyến bay" />
                                        <GridViewColumn DisplayMemberBinding="{Binding departureTime}"
                                                        Header="Giờ khởi hành"/>
                                        <GridViewColumn DisplayMemberBinding="{Binding landingTime}"
                                                        Header="Giờ hạ cánh"/>
                                        <GridViewColumn DisplayMemberBinding="{Binding priceFlight}"
                                                        Header="Giá chuyến bay"/>
                                        <GridViewColumn>
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Button Width="80"
                                                            Content="Chọn"
                                                            Style="{StaticResource MaterialDesignOutlinedButton}">
                                                        <i:Interaction.Triggers>
                                                            <i:EventTrigger EventName="Click">
                                                                <i:InvokeCommandAction Command="{Binding SelectFlightCommand}"
                                                                                       CommandParameter="{Binding ElementName=tabTicketSale}"/>
                                                            </i:EventTrigger>
                                                        </i:Interaction.Triggers>
                                                    </Button>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </materialDesign:Card>
                    </Grid>
                </Grid>
            </TabItem>

            <!--info passenger-->
            <TabItem Header="Thông tin hành khách"
                     Width="auto"
                     Height="50"
                     VerticalAlignment="Top"
                     Style="{StaticResource MaterialDesignNavigationRailTabItem}"
                     IsEnabled="False">
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
